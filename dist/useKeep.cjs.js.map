{"version":3,"file":"useKeep.cjs.js","sources":["../src/useKeep.ts"],"sourcesContent":["import * as React from 'react';\r\n\r\nexport interface UseKeepOptions {\r\n  /**\r\n   * Optional condition function. If it returns false, dragging won't start.\r\n   */\r\n  condition?: (event: React.MouseEvent | MouseEvent) => boolean;\r\n\r\n  /**\r\n   * Triggered on mousedown (if condition is true).\r\n   */\r\n  onStart: (event: React.MouseEvent) => void;\r\n\r\n  /**\r\n   * Triggered on mousemove while the mouse is down.\r\n   */\r\n  onMove: (event: MouseEvent) => void;\r\n\r\n  /**\r\n   * Triggered on mouseup.\r\n   */\r\n  onStop: (event: MouseEvent) => void;\r\n}\r\n\r\n/**\r\n * useKeep\r\n * A custom hook to manage mouse interactions: mousedown, mousemove, mouseup.\r\n */\r\nexport default function useKeep({\r\n  condition,\r\n  onStart,\r\n  onMove,\r\n  onStop,\r\n}: UseKeepOptions) {\r\n  const isDownRef = React.useRef(false);\r\n\r\n  const handleMouseDown = React.useCallback(\r\n    (downEvent: React.MouseEvent) => {\r\n      if (condition && !condition(downEvent)) return;\r\n\r\n      isDownRef.current = true;\r\n      onStart(downEvent);\r\n\r\n      const handleMouseMove = (moveEvent: MouseEvent) => {\r\n        if (isDownRef.current) {\r\n          onMove(moveEvent);\r\n        }\r\n      };\r\n\r\n      const handleMouseUp = (upEvent: MouseEvent) => {\r\n        if (isDownRef.current) {\r\n          isDownRef.current = false;\r\n          onStop(upEvent);\r\n        }\r\n\r\n        window.removeEventListener('mousemove', handleMouseMove);\r\n        window.removeEventListener('mouseup', handleMouseUp);\r\n      };\r\n\r\n      window.addEventListener('mousemove', handleMouseMove);\r\n      window.addEventListener('mouseup', handleMouseUp);\r\n    },\r\n    [condition, onStart, onMove, onStop]\r\n  );\r\n\r\n  return handleMouseDown;\r\n}\r\n"],"names":["React"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAwBA;;;AAGG;AACqB,SAAA,OAAO,CAAC,EAC9B,SAAS,EACT,OAAO,EACP,MAAM,EACN,MAAM,GACS,EAAA;IACf,MAAM,SAAS,GAAGA,gBAAK,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;IAEtC,MAAM,eAAe,GAAGA,gBAAK,CAAC,WAAW,CACvC,CAAC,SAA2B,KAAI;AAC9B,QAAA,IAAI,SAAS,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC;YAAE,OAAO;AAE/C,QAAA,SAAS,CAAC,OAAO,GAAG,IAAI,CAAC;QACzB,OAAO,CAAC,SAAS,CAAC,CAAC;AAEnB,QAAA,MAAM,eAAe,GAAG,CAAC,SAAqB,KAAI;YAChD,IAAI,SAAS,CAAC,OAAO,EAAE;gBACrB,MAAM,CAAC,SAAS,CAAC,CAAC;AACnB,aAAA;AACH,SAAC,CAAC;AAEF,QAAA,MAAM,aAAa,GAAG,CAAC,OAAmB,KAAI;YAC5C,IAAI,SAAS,CAAC,OAAO,EAAE;AACrB,gBAAA,SAAS,CAAC,OAAO,GAAG,KAAK,CAAC;gBAC1B,MAAM,CAAC,OAAO,CAAC,CAAC;AACjB,aAAA;AAED,YAAA,MAAM,CAAC,mBAAmB,CAAC,WAAW,EAAE,eAAe,CAAC,CAAC;AACzD,YAAA,MAAM,CAAC,mBAAmB,CAAC,SAAS,EAAE,aAAa,CAAC,CAAC;AACvD,SAAC,CAAC;AAEF,QAAA,MAAM,CAAC,gBAAgB,CAAC,WAAW,EAAE,eAAe,CAAC,CAAC;AACtD,QAAA,MAAM,CAAC,gBAAgB,CAAC,SAAS,EAAE,aAAa,CAAC,CAAC;KACnD,EACD,CAAC,SAAS,EAAE,OAAO,EAAE,MAAM,EAAE,MAAM,CAAC,CACrC,CAAC;AAEF,IAAA,OAAO,eAAe,CAAC;AACzB;;;;"}